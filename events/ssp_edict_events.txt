namespace = ssp_ritual

country_event = {
    id = ssp_ritual.100
    title = ssp_ritual.100.name
	desc = ssp_ritual.100.desc
	picture = GFX_evt_alien_propaganda
	show_sound = event_death_cult
	location = capital_scope
    is_triggered_only = yes

    modifier = {
        trigger = {
		is_spiritualist = yes
		OR = {
			has_valid_civic = civic_death_cult
            has_valid_civic = civic_death_cult_corporate
        }
    }
    
}

immediate = {
    switch = {
        trigger = has_country_flag
            grimoire_levelI = {
                divide_variable = {
                    which = sacrifice_result_current_count
                    value = 0.25
            }
        }
            grimoire_levelII = {
                divide_variable = {
                    which = sacrifice_result_current_count
                    value = 0.25
            }
         }
            grimoire_levelIII = {
                divide_variable = {
                    which = sacrifice_result_current_count
                    value = 0.5
            }
        }
            grimoire_levelIV = {
                divide_variable = {
                    which = sacrifice_result_current_count
                    value = 0.5
            }
        }
            grimoire_levelV = {
                divide_variable = {
                    which = sacrifice_result_current_count
                    value = 0.75
            }
        }
            grimoire_maxima = {
                divide_variable = {
                    which = sacrifice_result_current_count
                    value = 1
                }
            }
        }
    }


    while = {
		count = sacrifice_result_current_count
        capital_scope = {
		create_pop = {
			species = owner_species
            add_traits_at_start_of_list = yes
                    }
                    last_created_pop = {
                        set_pop_flag = ssp_reinc_zombie
                        if = {
                            limit = {
                                NOT = {
                                    has_trait = trait_zombie
                                }
                            }
                            modify_species = {
                                species = this
                                add_trait = trait_zombie
                                add_traits_at_start_of_list = yes
                            }
                        }
                    }
                }
            }
    clear_variable = sacrifice_result_mult
}


