namespace = ssp_dig_site

#BacteriumShip

fleet_event = {
	id = ssp_dig_site.1
	title = ssp_dig_site.1.name
	desc = ssp_dig_site.1.desc
	show_sound = event_scanner
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no }
	}

	option = {
		name = ssp_dig_site.1a.name
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier2researchmin
				max = @tier5researchmax
			}
		}
	}
} 


fleet_event = {
	id = ssp_dig_site.2
	title = ssp_dig_site.2.name
	desc = ssp_dig_site.2.desc
	picture = GFX_evt_gpm_time_lost
	show_sound = event_sensor_ping
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no }
	}

	option = {
		name = ssp_dig_site.2a.name
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier1researchmin
				max = @tier4researchmax
			}
		}
	}
}  #Society Research

fleet_event = {
	id = ssp_dig_site.3
	title = ssp_dig_site.3.name
	desc = ssp_dig_site.3.desc
	picture = GFX_evt_gpm_time_lost_relic
	show_sound = event_mystic_reveal
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no }
	}

##MAKE IT SPAWN THE JONAN FOUNDRY THING HERE
}

	fleet_event = {
		id = ssp_dig_site.4
		title = ssp_dig_site.4.name
		desc = ssp_dig_site.4.desc
		show_sound = event_scanner
		location = from
	
		archaeology = yes
	
		is_triggered_only = yes
	
		immediate = {
			fromfrom = { set_site_progress_locked = yes }
		}
	
		after = {
			fromfrom = { set_site_progress_locked = no }
		}
	
		option = {
			name = ssp_dig_site.4a.name

				owner = { 
					add_relic = ssp_r_khyran_bacterium
				}
				log = "<< RELICS >> | ADD_RELIC <<< ssp_r_khyran_bacterium  >>> to OWNER = [owner.GetName] ; dig site reward"
				owner = {
					every_relation = {
				
				limit = {
							gpm_is_country_type_default = yes
							has_communications = root.owner
						}
						log = "<< RELICS >> | RELIC LOOTED <<< create message on THIS = [THIS.GetName]"
						create_message = {
							type = GPM_MESSAGE_RELIC_POSSESSION
							localization = GPM_MESSAGE_RELIC_POSSESSION_DESC
							days = 30
							target = root.owner.capital_scope
							variable = {
								type = name
								localization = COUNTRY
								scope = root.owner
							}
						}
					}
				}
			}

			option = {
			name = ssp_dig_site.4b.name

				owner = { 
					add_relic = ssp_r_drive_core
				}
				log = "<< RELICS >> | ADD_RELIC <<< ssp_r_drive_core  >>> to OWNER = [owner.GetName] ; dig site reward"
				owner = {
					every_relation = {
				
				limit = {
							gpm_is_country_type_default = yes
							has_communications = root.owner
						}
						log = "<< RELICS >> | RELIC LOOTED <<< create message on THIS = [THIS.GetName]"
						create_message = {
							type = GPM_MESSAGE_RELIC_POSSESSION
							localization = GPM_MESSAGE_RELIC_POSSESSION_DESC
							days = 30
							target = root.owner.capital_scope
							variable = {
								type = name
								localization = COUNTRY
								scope = root.owner
							}
						}
					}
				}
			}
		}
	

#CommunicationHub

fleet_event = {
	id = ssp_dig_site.5
	title = ssp_dig_site.5.name
	desc = ssp_dig_site.5.desc
	show_sound = event_scanner
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no }
	}

	option = {
		name = ssp_dig_site.5a.name
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier2researchmin
				max = @tier5researchmax
			}
		}
	} #update this
} 


fleet_event = {
	id = ssp_dig_site.6
	title = ssp_dig_site.6.name
	desc = ssp_dig_site.6.desc
	picture = GFX_evt_gpm_time_lost
	show_sound = event_sensor_ping
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no }
	}

	option = {
		name = ssp_dig_site.6a.name
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier1researchmin
				max = @tier4researchmax
			}
		}
	} #update this
} 

fleet_event = {
	id = ssp_dig_site.7
	title = ssp_dig_site.7.name
	desc = ssp_dig_site.7.desc
	picture = GFX_evt_gpm_time_lost_relic
	show_sound = event_mystic_reveal
	location = from

	archaeology = yes

	is_triggered_only = yes

	immediate = {
		fromfrom = { set_site_progress_locked = yes }
	}

	after = {
		fromfrom = { set_site_progress_locked = no }
	}

	option = {
		name = ssp_dig_site.7a.name
		owner = {
					add_research_option = tech_ssp_jonan_communication_key
					hidden_effect = { add_tech_progress = { tech = tech_ssp_jonan_communication_key progress = 0.33 } }
				}
				modifier = { factor = 0 owner = { has_technology = tech_ssp_jonan_communication_key } }
	}
}